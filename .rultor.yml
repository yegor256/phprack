# phpRack
#
# This source file is subject to the new BSD license that is bundled
# with this package in the file LICENSE.txt. It is also available
# through the world-wide-web at this URL: http://www.phprack.com/LICENSE.txt
# If you did not receive a copy of the license and are unable to
# obtain it through the world-wide-web, please send an email
# to license@phprack.com so we can send you a copy immediately.
#
# SPDX-FileCopyrightText: Copyright (c) 2009-2026, phpRack.com, Inc.
# SPDX-License-Identifier: MIT

architect:
- yegor256
- davvd
install: |
  sudo pecl install xdebug
  echo "zend_extension=xdebug.so" > xdebug.ini
  sudo mv xdebug.ini /etc/php5/cli/conf.d
  composer install
  sudo npm install jscoverage -g
merge:
  script: |
    ./vendor/phing/phing/bin/phing
  commanders: []
deploy:
  script: |
    ./vendor/phing/phing/bin/phing
release:
  pre: false
  script: |
    ./vendor/phing/phing/bin/phing main doc
    mkdir build/ftp-upload
    cp phpRack/* build/ftp-upload
    cp src/test/integration-test/* build/ftp-upload
    cp phprack.com/* build/ftp-upload/public
    cp src/phpRack/layout/logo.png build/ftp-upload/public
    cp src/LICENSE.txt build/ftp-upload/public
    cp build/apidocs build/ftp-upload/public/api
    cp build/coverage build/ftp-upload/public/coverage
    # upload by ftp
  commanders:
  - yegor256
